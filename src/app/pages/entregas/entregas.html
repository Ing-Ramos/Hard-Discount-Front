<div *ngIf="cargando" class="loading-container">
  <p>Cargando entregas...</p>
  <div class="spinner"></div>
</div>

<table *ngIf="!cargando && entregas.length > 0" class="entregas-table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Pedido ID</th>
      <th>Cliente</th>
      <th>Fecha Programada</th>
      <th>Estado</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let entrega of entregas">
      <td>{{ entrega.id }}</td>
      <td>{{ entrega.pedidoId }}</td>
      <td>{{ entrega.cliente }}</td>
      <td>{{ entrega.fechaProgramada | date:'dd/MM/yyyy HH:mm' }}</td>
      <td [ngClass]="{
        'pendiente': entrega.estado === 'Pendiente', 
        'procesando': entrega.estado === 'Procesando', 
        'entregado': entrega.estado === 'Entregado'
      }">
        {{ entrega.estado }}
      </td>
      <td>
        <button 
          *ngIf="entrega.estado === 'Pendiente'" 
          class="action-btn btn-procesando" 
          (click)="actualizarEstado(entrega.id, 'Procesando')">
          Marcar como Procesando
        </button>
        <button 
          *ngIf="entrega.estado === 'Procesando'" 
          class="action-btn btn-entregado" 
          (click)="actualizarEstado(entrega.id, 'Entregado')">
          Marcar como Entregado
        </button>
        <span *ngIf="entrega.estado === 'Entregado'" class="badge-entregado">
          âœ“ Entregado
        </span>
      </td>
    </tr>
  </tbody>
</table>

<div *ngIf="!cargando && entregas.length === 0" class="no-data">
  <p>No hay entregas registradas.</p>
</div>