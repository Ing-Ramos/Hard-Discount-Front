<div *ngIf="cargando" class="loading-container">
  <p>Cargando entregas...</p>
  <div class="spinner"></div>
</div>
<table *ngIf="!cargando && entregas.length > 0" class="entregas-table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Pedido ID</th>
      <th>Cliente</th>
      <th>Fecha Programada</th>
      <th>Estado</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let entrega of entregas">
      <td>{{ entrega.id }}</td>
      <td>{{ entrega.pedidoId }}</td>
      <td>{{ entrega.cliente }}</td>
      <td>{{ entrega.fechaProgramada | date:'dd/MM/yyyy HH:mm' }}</td>
      <td [ngClass]="{
        'pendiente': entrega.estado === 'pendiente', 
        'enviado': entrega.estado === 'enviado',
        'entregado': entrega.estado === 'entregado'
      }">
        {{ entrega.estado }}
      </td>
      <td>
        <!-- Botones para estado PENDIENTE -->
        <div *ngIf="entrega.estado === 'pendiente'" class="botones-acciones">
          <button 
            class="action-btn btn-enviado" 
            (click)="actualizarEstado(entrega.id, 'enviado')">
            Marcar como Enviado
          </button>
          <button 
            class="action-btn btn-entregado" 
            (click)="actualizarEstado(entrega.id, 'entregado')">
            Marcar como Entregado
          </button>
        </div>

        <!-- BotÃ³n para estado ENVIADO -->
        <button 
          *ngIf="entrega.estado === 'enviado'" 
          class="action-btn btn-entregado" 
          (click)="actualizarEstado(entrega.id, 'entregado')">
          Marcar como Entregado
        </button>

        <!-- Badge para estado ENTREGADO -->
        <span *ngIf="entrega.estado === 'entregado'" class="badge-entregado">
          Entregado
        </span>
      </td>
    </tr>
  </tbody>
</table>

<div *ngIf="!cargando && entregas.length === 0" class="no-data">
  <p>No hay entregas registradas.</p>
</div>